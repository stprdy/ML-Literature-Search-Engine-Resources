journal l ex class file vol xx no x august 1 weakly supervised learning travel time estimation hongjun wang zhiwen zhang zipei fan jiyuan chen lingyu zhang ryosuke shibasaki xuan song time estimation gps trip great importance order duration ridesharing taxi dispatching etc however dense trajectory not always available due limitation data privacy acquisition od type data nyc taxi data nyc bike data capital bikeshare data accessible address issue paper start estimate od trip travel time combined road network subsequently weakly supervised learning framework travel time estimation ha proposed infer transition probability road segment travel time road segment intersection simultaneously technically given od pair transition probability intends recover possible route output travel time equal summation segment intersection travel time route novel route recovery function ha proposed iteratively maximize current route probability minimize discrepancy route probability distribution inverse distribution route estimation loss moreover expected function based framework ha deployed optimizing travel time road segment intersection concurrently conduct experiment wide range taxi datasets xi chengdu demonstrate method effectiveness route recovery travel time estimation index time estimation urban computing weakly supervised learning 1 introduction emergence application timating travel time ha become one hottest ic great importance route planning taxi dispatching recent year early phase data real trafÔ¨Åc state mainly collected loop sensor only provide individual travel time certain road segment usually face sparse issue recently alternative solution use Ô¨Çoating car data Ô¨Çoating car equipped gps receiver including taxi bus private car online record time stamp longitude latitude speed formation regular interval reÔ¨Çect vehicle operation status result good deal travel time estimation niques based Ô¨Çoating car data proposed different scene dense trajectory 1 2 3 hongjun wang jiyuan chen xuan song 1 joint research center super smart city department computer science engineering 2 research institute trustworthy autonomous system southern university science technology sustech shenzhen china songx zipei fan ryosuke shibasaki zhiwen zhang university tokyo kashiwanoha chiba japan email zhangzhiwen fanzipei shiba lingyu zhang research institute trustworthy autonomous system southern university science technology sustech shenzhen china email zhanglingyu corresponding zipei fan xuan song hongjun wang zhiwen zhang equal contribution trajectory 4 5 6 however due privacy concern data acquisition problem extensive work focus inferring travel time od data only give location Ô¨Ånding nearby neighbor 7 8 9 neighbor general od type data available dense type multiple source od data released example nyc taxi nyc bike capital bikeshare however far know previous literature omits factor road network often lead high estimating error since total travel time trajectory equal sum travel time road segment intersection waiting trafÔ¨Åc signal trafÔ¨Åc condition road segment change affect total travel time road network introduced face three intractable problem 1 recover route only od pair given 2 effectively estimate travel time route ha obtained 3 learn feature complex road network Ô¨Årst glance given pair est path algorithm dijkstra algorithm natural choice problem 1 people usually choose path similar shortest path le number turn however shortest path geometry aspect may not always match deÔ¨Ånition shortest path driver route choice example some resident 1 2 13 jan 2023 journal l ex class file vol xx no x august 2 tertiary type road shorter primary trunk type road vulnerable congestion since complex trafÔ¨Åc state many pedestrian rowness road width encode road feature road search procedure one way done learning transition probability road segment inferring route via search maximum route probability superiority approach character road considered every search process inspired 10 article employ graph neural network gcn learn feature road type road length road sign road lane road segment consequently problem ignoring natural road network algorithm alleviated fig 1 show example searching candidate path transition probability based markov assumption routing probability obtained multiplying probability equal sum log probability candidate path acquired depth first searching dfs algorithm pruning operation mentioned paper infers overall travel time given route summing travel time road segment intersection route raise question estimate travel time road segment intersection reasonably one concern model difference individual driving behavior since given speciÔ¨Åc od pair travel time time interval varied address problem model travel time uncertainty mean travel time follows certain tion lognormal tend provided large variance œÉ example large crowd Ô¨Çow conclusion uncertain travel time route generated route searching ha obtained effectively optimize distribution paper formulates inexact supervision learning problem 11 one example inexact supervision drug activity prediction problem 12 predicts molecule induces given effect inexact supervision deal training data arranged set called bag label only annotated bag modeling uncertainty given pair origin destination consider travel time label annotated unobserved route bag use normal distribution 13 14 15 model uncertainty road segment interaction travel time bag drive objective function eq 2 based assumption aggregated observation markov chain solve general inexact learning probabilistic framework 16 iterative route recovery algorithm solution 1 2 ha discussed Ô¨Ånally introduce learn meaningful feature complicated road network since multiple factor affect trafÔ¨Åc condition road type road lane speed limitation trafÔ¨Åc signal learn intricate relation road network many existing work modeling lem estimating travel time either road segment 1 3 intersection 17 not assemble feature simultaneously however argue cause error accumulation road segment increasing Ô¨Åll source target 1 1 candidate path ùëüùëü 1 log ùëüùëü 2 log ùëüùëü 3 log graph graph road segment intersection intersection road network fig motivation paper illustrated given any od pair want recover path searching maximum route probability learned model construct dual graph based aspect estimate travel time road segment intersection respectively gap work construct dual graph comprised graph graph estimate travel time summing road segment intersection one route meanwhile also take connected consideration one road segment one road segment primary secondary trunk one intersection one intersection tertiary residential introduce relational graph convolutional network 18 learn complex connected relation road network moreover solve problem losing local pattern expanding receptive neighborhood gcn combine relational graph convolutional network gated recurrent unit gru 19 together stacked architecture capture global local feature 20 fig 1 represents procedure construct dual graph gray box road network recover route candidate set searched transition probability main contribution paper summarized follows propose framework estimate travel time road segment intersection transition probability simultaneously best knowledge Ô¨Årst attempt recover route jointly model factor intersection road segment general od travel time estimation problem Ô¨Årst time consider estimation od travel time weakly supervised learning problem since observation od travel time annotated bag unobserved route paper aim infer road segment intersection travel time distribution aggregation observation validate effectiveness travel time estimation route recovery using datasets real world chengdu xi respectively signiÔ¨Åcantly outperform current method list organization paper sec 2 give related work including weakly supervised learning travel time estimation well route estimation sec 3 introduces preliminary knowledge road journal l ex class file vol xx no x august 3 work sec 4 provides deÔ¨Ånition formulation assumption objective function sec 5 give methodology sec 6 sec 7 conduct qualitative quantitative experiment respectively demonstrate superiority sec 8 give summary paper future work 2 related work section discus several relevant topic weakly supervised learning travel time estimation well route estimation weakly supervised learning since general supervised learning method requires data training set labeled expensive beling consumes lot manpower time therefore learning condition weakly supervised mation ha become hot research topic Ô¨Åeld machine learning recent year 21 22 23 weakly supervised learning method focus addressing quality label scenario 1 incomplete supervision 24 only part data labeled 2 inexact supervision 12 only label 3 inaccurate supervision 25 only part data owns true label task estimating travel time od considered inexact supervision belonging category weakly supervised learning only observation total travel time od location accurate route unknown different traditional approach 7 26 searching similar historical trajectory data ignoring city road network structure paper aim infer potential route od using transition probability road segment set potential route seen bag od travel time obtained summing estimated time road segment bag best knowledge Ô¨Årst introduce problem travel time estimation inexact supervision framework travel time estimation various tte implementation classiÔ¨Åed three group traditional approach deep proaches graph neural approach ditional approach tte include based method road method 27 28 coarsely forecast route travel time summing estimated time road using data collected sensor like magnetometer detector highway camera omitted necessary factor intersection relationship among road segment method address challenge mainly nearest neighbor search 7 26 trajectory regression 28 29 30 nearest neighbor search nns Ô¨Ånds nearby historical trajectory according assumption route similar origin destination close travel time trajectory regression method predict whole route travel time based given historical trajectory recently deep approach become especially important task tte approach divided two group classical deep based method graph deep method some classical method deep neural network dnns 1 convolutional neural network cnns 2 31 successfully applied tte ple 1 proposed framework integrate various type attribute information weather time id driver id tte however method model road network map ignore graphical structure road network fully utilize spatial information gnn emerging tool analyze topological relation trafÔ¨Åc data especially graph neural work stgnn 32 framework integrates gnn temporal processing module handle tial relation temporal trend simultaneously due characteristic road network stgnn widely adopted tte example diffusion convolutional recurrent neural network dcrnn 33 modeled trafÔ¨Åc data sion process directed graph transformed temporal feature framework astgnn 34 proposes attention mechanism capture multiple potential correlation trafÔ¨Åc forecasting however work only consider tribute road segment ignore interactive tions intersection road segment meanwhile real route od pair road condition also important inÔ¨Çuence tte route estimation another bunch research travel time estimation solve issue sparse trajectory due privacy ness competition 4 5 6 limitation gps device scene etc 35 36 surveillance camera 37 common strategy solving sparse trajectory infer potential route based information road network reference 4 applies inverse ment learning learn latent cost reward road historical data proposed exact route search approach Ô¨Ånd maximum probabilistic route based dynamic programming however route rithms only adapted rate trajectory not od problem due heavy computational cost large distance pair toll station surveillance camera frequently used path inferring algorithm based depth first searching algorithm Ô¨Ånd possible simple path one road segment only appear however method omitting real trafÔ¨Åc condition tend generate unreal route path inferring procedure end paper combine transition probability route search approach together Ô¨Ånd optimal route based real travel time road network structure 3 preliminary start giving deÔ¨Ånition road network simple path well route journal l ex class file vol xx no x august 4 x od z w k node link fig graphical model data generating process deÔ¨Ånition road network road network directed graph g v e œÄ v denotes set node e set directed edge œÄ node feature set paper us gv ge denote graph respectively œÄ gv feature v junction type trafÔ¨Åc signal œÄ ge feature v road type road lane speed limit deÔ¨Ånition od paper od pair represents tuple ei ej tth ei ej denote start end road segment respectively tth start time interval day note assume trafÔ¨Åc condition road segment intersection invariable within time slot deÔ¨Ånition simple path simple path tr presented series link tr link satisÔ¨Åed ei ej deÔ¨Ånition route route r paper sequence alternating link intersection r vi intersection edge pair ei k length 4 problem formulation overcome previous issue ignoring road network problem intend give formulation weakly supervised learning solution motivated advance weakly supervised learning gcn path inference given pair origin destination estimating travel time infer total time cost traditionally formulation tte divided two part 1 inferring future trafÔ¨Åc historical state 3 38 2 online infer trafÔ¨Åc trajectory 39 previous one mainly related robust trafÔ¨Åc state calculated either dense trajectory 3 loop detector 32 another one intends resolve sparse issue estimating imputation trafÔ¨Åc state fewer trajectory since paper od scenario hard give valid historical trafÔ¨Åc state follow online tte formulation formally paper follows assumption trafÔ¨Åc state one road segment speciÔ¨Åc time interval distribution gaussian distribution n ¬µ œÉ ¬µ œÉ subsequently suppose current time train od pair time slot online trafÔ¨Åc state completed evaluated od pair table 1 partial symbol description notation description link inner transition probability matrix q aggregate function œâod set candidate path f function x feature link node z unobservable travel time link node gv ge graph respectively e ground truth estimated travel time time embedding vector w learnable parameter training procedure fig 2 lustrates data generating process graphical sentation od feature tions stand feature vector unobserved k node link route r k unobservable travel time node link assume r conditioned od transition matrix ai j indicates transition probability ei ej therefore p od p od generated tion f f wa ge ge link graph w learnable parameter meanwhile z also parametric distribution p f k wz p ¬µ œÉ f k wz factor k wz ¬µ œÉ mean variance gaussian distribution relation k aggregate observation travel time following tion deÔ¨Ånition given route ri pair od unobserved travel time k tek aggregate function q deÔ¨Åned q z tk 1 aggregate function q z mapping function unobserved variable z observation since assume z follows gaussian distribution ten q z p ti p ¬µi according ture additivity x 1 2 x 1 2 subsequently summarize assumption assumption 1 aggregate observation assumption p k k p k assume observation conditionally independent k given k def intuitively given z fact travel time obtained summing component assumption 2 markov chain assumption p k k p qk p xi zi assume road travel time mutually independent except zi consistently subscript example k denotes abbreviation set xk journal l ex class file vol xx no x august 5 node embedding link embedding road attribute embedding layer link embedding node embedding stacked stacked learning model learning module spatial gcn module transition probability travel time distribution node travel time distribution link update path search b detailed structure stacked gru gru concatenation gru overview model concatenation gru source target od pair initialize transition probability candidate path path travel time estimation road feature embedding stacked relational gcn stacked relational gcn mlp softmax positional vector n path dim transition probability generative layer current path travel time distribution link travel time distribution node transition probability c detailed structure learning module relu mlp candidate route posterior probability graph graph time embedding selection f f f route search layer fig framework design overview proposed model depicted includes route search layer road attribute embedding layer spatial gcn module learning module b architecture stacked layer attempt capture global local relation modeling gru together c learning layer estimate travel time link intersection transition probability simultaneously transition probability updated learning layer output path search algorithm work Ô¨Ånd candidate path assumption markov chain extensive application trajectory data mining 40 41 furthermore since determined function q conditional probability p k Œ¥q k Œ¥ represents dirac delta function sum objective function paper deÔ¨Åned max k p k od k p od z zk p k k k p od z zk Œ¥q k p k k k p od e k p od 2 therefore according eq 2 training procedure could split two stage 1 maximizes posterior probability p od 2 maximizes conditional probability p k k estimate road segment intersection travel time optimized expected 16 ‚Ñì w e log p k w 3 ease reference some important notation rized table give brief summarization problem mulation paper aim solve two challenge od travel time estimation uncertain route uncertain travel time intend infer potential route r source destination transition probability fig speed distribution neighbor road segment 7 day national day observe speed distribution highly consistent connected type color indicate road correspondingly subsequently optimize travel time distribution k tek r via weakly pervised learning eq 3 assume gaussian distribution n ¬µ œÉ therefore transition probability parameter gaussian distribution generated ¬µ œÉ f w gv ge ¬µ œÉ mean variance gaussian distribution respectively 5 methodology section detailedly introduced speciÔ¨Åcally overview ha depicted fig 3 including four component included road attribute embedding layer spatial gcn module route search layer learning module fig 3 b show inner structure stacked layer fig 3 c represents learning module journal l ex class file vol xx no x august 6 road attribute embedding layer let latent variable ti belong gaussian tribution n ¬µi œÉi common assumption widely used modeling travel time distribution 13 14 15 given pair od conditional probability p f k wz p ¬µ œÉ f k wz therefore one task neural work f estimate distribution parameter ¬µ œÉ road segment intersection since road feature k could affect travel time estimation z consider follow statistical spatial factor important matter road segment road type primary primary link secondary ondary link tertiary residential service road etc number lane many trafÔ¨Åc line road otherwise feature road length whether one way not limiting velocity unique id intersection node tag speed camera trafÔ¨Åc signal crossing sign turn circle stop sign node street count junction otherwise feature unique id gps coordinate obtain feature representation link node use embedding method 42 transform categorical attribute feature tor multiplying spatial feature embedding matrix e n represents number possible value categorical feature represents embedding dimension allows u share efÔ¨Åcient information among different road segment intersection rarely traveled segment could learned frequently traveled similar semantic meaning besides categorical road attribute concatenate obtained embedded feature vector together road attribute road length gps coordinate based feature representation dual graph wise obtain corresponding input subsequent spatial gcn module spatial gcn module embedding characteristic road attribute obtained next introduce spatial gcn module serving modeling complex spatial relation dual graph motivation introducing gcns estimation problem ha resented fig observe travel speed highly similar connected type speciÔ¨Åcally even though second section jianshe north road neighbor xiuyuan east guoguang road speed distribution related jianshe road road type therefore concerned feature road type connected type example resident link level secondary node level also important end introduce lational graph convolutional network 18 model deÔ¨Åned h œÉ x r 1 ci r w l r h l j w l 0 h l 4 h l l hidden state road ri lth layer model dimensionality l n r denotes set neighboring road index relation w l r w l 0 learnable parameter ci r normalization constant œÉ activation function paper set ci r r next introduce stacking operation based stacking operation ha recently strated prevent local information loss 20 43 thus model temporal trend stacked gcn architecture combined spatial feature representation node link paper use gated recurrent unit gru 19 temporal processing module tally concatenate feature written c 0 gru h 0 c h 1 œÉ x r 1 ci r w 0 r h l j w 0 0 h 0 h 2 œÉ x r 1 ci r w 1 r h h 0 j h 1 j w 1 0 h h 0 h 1 h œÉ x r 1 ci r w l r h c j h l j w l 0 h c h l 5 l 2 3 n c l hidden state output gru c initialized h l latent state link node lth hop detailed architecture stacked ha shown fig 3 b formula gru expressed œÉ q œÉ tanh q c 1 6 learnable rameters bias learning module section introduce production tte route recovery algorithm together generating node link travel time mentioned sec 4 task tte lated given od pair corresponding observation aim complete travel time link node evaluate using od pair address data sparse issue paper formulates problem tensor completion 44 tensor decomposition technique popular method journal l ex class file vol xx no x august 7 trafÔ¨Åc missing value imputation method since urban travel time ha typical temporal spatial distribution characteristic frequently divided two level one modeling road segment intersection space temporal embedding time weather id holiday id based temporal embedding Ô¨Ånally employ order cp decomposition reconstruct travel time distribution ¬µe h e w¬µe b¬µe œÉe h e wœÉe bœÉe ¬µv h v w¬µv b¬µv œÉv h v wœÉv bœÉv ¬µe œÉe ¬µv œÉv mean variance gaussian distribution link node respectively w¬µe wœÉe w¬µv wœÉv l b¬µe bœÉe b¬µv bœÉv parameter fully connected layer fc embedding tensor time ti denotes embedding vector interval discretize day time time slot minute according expected likelihood eq 3 since normal distribution closed addition loss function derived l¬µ œÉ q k k 2 2 p 2 log x k 2 2 log 7 q aggregation function deÔ¨Åned def k denotes number sample bag paper bag equal route def transition probability generative layer thereafter introduce detailed structure tion probability generative layer generate link sition probability using edge feature h eq 5 technically last two layer use perceptron mlp produce weight link mlp h h j operator concatenation apply softmax layer outgoing link p ej ei exp p exp 8 transition probability eq 8 ployed route search layer simplicity use transition matrix represent link possibility example j p ej ei route search layer aforementioned shortest route algorithm omit condition road practice solve problem intend construct transition probability road segment combine transition probability infer route however considering complex highway graph tremendous number route any od pair would reasonable prune route some threshold therefore paper prune route two aspect 1 length simple route r origin destination satisfy rshort Œ¥lens rshort shortest simple route Œ¥lens distance threshold 2 probability simple route p also meet criterion p Œ¥probs Œ¥probs probability old next introduce deÔ¨Ånition probability p according assumption 2 eq 8 route probability p r p ek p k p ei 9 origin location p strategy pruning ha introduced candidate route obtained depth first search dfs algorithm speciÔ¨Åcally generate candidate route set œâod via posterior probability p choose route maximum probability optimal solution formally given od pair observation optimal route written arg max p ri od z arg min r x ¬µ e x ¬µ v 10 eq 10 selects suitable route current travel time ¬µ model training next introduce optimizing procedure tte discussed sec top maximum route obtained chose satisÔ¨Åed one eq 10 however choice may fall local solution candidate route might never picked address problem introduce algorithm mean route satisÔ¨Åed eq 10 chosen 1 probability otherwise randomly select route top maximum probability œµ probability moreover wish transition probability could help u infer possible route based ground truth observation travel time adopt leibler kl divergence measure coherence written dkl x p ln q p 11 p probability distribution route candidate set q inverse estimation loss bution q ¬µ ground truth word optimization direction towards higher route probability accurate travel time estimation route picked eq 10 negative log likelihood nll loss ha employed minimize negative log likelihood function deÔ¨Åned ltp x log p ei Œ∏ 12 Œ∏ model trainable parameter represent posterior probability fusing objective function journal l ex class file vol xx no x august 8 together model trained minimize weighted combination three loss term l Œ±l¬µ œÉ Œ≤ltp 1 dkl 13 Œ± Œ≤ const parameter balance three loss term l¬µ œÉ ltp dkl training pseudocode ha depicted algorithm algorithm 1 training procedure input od datasets graph gv graph ge number candidate route n output od tte estimation function f 1 not convergence 2 ¬µ œÉ f w gv ge 3 od generating top n candidate route set œâod select route ri œâod calculate loss eq 13 update parameter 4 end 5 end 6 return f 6 experiment section various experiment conducted based wide range public taxi dataset xi chengdu evaluate superiority tte route recovery aspect datasets road network use two road network chengdu road network xi road network extracted openstreetmap 45 include nine road type trunk trunk link freeway link primary primary link secondary secondary link tertiary tertiary link chengdu road network contains 8221 edge 5182 node range latitude longitude xi road network contains 4780 edge 3782 node ranging latitude longitude taxi od order use two public taxi trajectory datasets come didi express platform generate od order generated order corresponds trip record consists location od implement xi dataset chengdu dataset whole week monday sunday gps point two datasets tied road interval sample trajectory point ensuring vehicle trajectory correspond actual road information especially generate ground truth route original vehicle trajectory route recovery task via tool fmm 46 baseline method metric Ô¨Årst compare model six baseline method task od travel time estimation temp temporally weighted neighbor 7 approach estimate od travel time averaging travel time historical tory falling time slot similar origin destination gbdt gradient boosting decision tree 47 used regression od travel time estimation stnn deep neural network 8 deep neural approach Ô¨Årst predicts travel distance given od pair combine prediction departure time estimate travel time murat representation learning 9 deep neural approach jointly predicts travel distance travel time taxi order learning representation road segment destination information dcrnn exploit gcn capture spatial dependency us recurrent neural network model ral dependency 33 implemented model based od estimation prediction road network hidden vector size gcn gru set 20 128 respectively constgat model adopts graph attention anism explore joint relation information 48 parameter setting basically original model integration module also use mlp astgnn model consider multiple factor trafÔ¨Åc forecasting periodicity spatial heterogeneity leveraging attention mechanism 34 number layer encoder decoder set kernel size convolution set moreover task od route recovery compare two representative baseline route recovery sparse trajectory based inverse forcement learning capture spatial transition bilities difference two model temporal component strs route recovery system 4 seek recover route sparse trajectory temporal component strs comprise matrix method li et al 3 proposes deep tive travel time estimation model named deepgtt replaces temporal component strs evaluation metric od travel time estimation mwsl evaluate performance rmse root mean square error mae mean absolute error mape mean absolute percentage error adopt accuracy route recovery main performance metric route recovery task deÔ¨Åned ratio length correctly inferred route length ground truth route rg inferred route ri whichever longer accuracy max experimental setting experiment implemented pytorch python trained gpu platform ran ubuntu trained model using adam journal l ex class file vol xx no x august 9 table 2 performance mwsl variant od travel time estimation compared baseline method model xi chengdu rmse sec mae sec mape rmse sec mae sec mape temp gbdt stnn murat dcrnn constgat astgnn table 3 inference time cost comparison travel time estimation model time unit second model xi chengdu time sec time sec dcrnn constgat astgnn optimizer initial learning rate chengdu xi datasets early stopping used validation dataset especially run experiment three time main setting proposed method described follows generation candidate route set œâa b candidate route selected od pair 6 used xi 8 chengdu respectively two ensure 90 percent ground truth route acquired œâod number stacked set 3 road attribute embedding layer embedding size link feature representation road id road type number lane one way not set 128 8 4 2 respectively embedding size node feature representation node id node type node street count set 96 2 2 respectively temporal embedding component embed weather id holiday id respectively experimental result compare baseline method two datasets performance travel time estimation table 2 show overall performance estimating travel time taxi od order performance comparison Ô¨Ånd achieves best performance table 4 performance mwsl baseline method route recovery column refers training time model unit hour model xi chengdu acc time acc time strs congested unblocked monday b pm monday crossing traffic signal bus stop fig ratio some node xi road network select three type node including crossing trafÔ¨Åc signal bus stop method term three metric better prediction result explained two aspect first model implement effective graphical structure capture prior information road network although dcrnn constgat astgnn model wise adjacency road segment feature especially trafÔ¨Åc signal junction ignored thus three model without considering adjacency not achieve higher accuracy second given od pair weak method study travel time distribution link node compared taxi od estimation baseline stnn murat information od pair improves estimation result ablation study table 2 except comparison experiment six baseline method also journal l ex class file vol xx no x august 10 table 5 performance mwsl different combination Œ± Œ≤ based xi chengdu dataset od travel time estimation route recovery datasets xi parameter tte route recovery rmse sec mae sec mape acc b east part second ring south road type trunk xiaozhai east road type primary fig learned speed distribution two sample link mwsl compared speed distribution computed original taxi trajectory duct ablation study replacing four variation namely evaluate effectiveness different module see fig 3 remove estimation remove stacked gru only use number layer remove replace number layer normal gcn 49 pathupdate only implement initial path process trajectory od order not update path based learned travel time transition probability result comparison show wise estimation critical part regardless aspect performance becomes worse prof importance modeling complex adjacency link node furthermore stacked gru integrate multiscale information capture global local feature path update also important improving travel time estimation sum key design effective time cost analysis due online travel time mation proposed compare inference time main baseline table 2 show travel time estimation el signiÔ¨Åcantly better performance common deep method batch size 32 using gpu card table 3 provides inference time cost comparison main model although proposed model slower dcrnn inference time model acquire faster inference time comapred relatively complex model inference time result also prof model process online travel time estimation performance route recovery table 4 show formance route recovery task given od pair Ô¨Ånd path recovery mwsl ha better recovery accuracy shorter model training time based method due long iteration inverse reinforcement learning acquire transition probability among road segment observe accuracy always worse strs reason larger sampling time interval tween od pair lead inaccurate trafÔ¨Åc tensor input deepgtt model trafÔ¨Åc representation particular complex chengdu road network lead recovery accuracy three method dropping expected analysis show ness component model conduct experiment different combination parameter Œ± Œ≤ based two datasets observed table 5 one hand Ô¨Ånd term tte task overall tte performance improves Œ± change datasets two city however Œ± 1 achieve best tte performance Œ≤ control loss term route recovery also ha some impact tte prediction accurate path update bring improvement tte prediction hand route recovery performance achieves best accuracy Œ± Œ≤ indicates dkl also play part obtaining higher accuracy route recovery furthermore compare route recovery performance Œ± optimal combination ltp dkl well excessive loss weight dkl would journal l ex class file vol xx no x august 11 gt estimation fig comparison ground truth trafÔ¨Åc state estimated trafÔ¨Åc state use four kind color represent different road state deÔ¨Åned 1 red congested 2 orange congested 3 yellow slow 4 green unblocked cause poor prediction performance sum conclude experimental result demonstrated superiority generality component proposed mwsl 7 case study not only conduct path travel time estimation route recovery od gps trip also learn travel time distribution link node based weakly supervised learning thus addition quantiÔ¨Åed evaluation described section also conduct case study xi visualizes learned distribution link node road network especially conducted comparison road condition computed original taxi trajectory learned distribution node link one hand Ô¨Årst provide estimation result different type node depicted fig select three type node road network use mwsl strs deepgtt xi mwsl strs deepgtt b chengdu fig divergence generated road condition ground truth datasets xi chengdu compared temporal component two baseline method ratio represent congestion status ratio calculated dividing sponding mean value learned travel time distribution maximum mean value among node noted Ô¨Ålter top 1 largest node travel time fig 5 Ô¨Ånd node trafÔ¨Åc signal type two type node node morning peak easy become congested indicate node travel time tion reasonable spatial temporal aspect hand transform travel time tribution speed distribution term link transformation process based 41 reason transformation user drive car normal speed range 10 kmph 120 kmph thus easily analyze rationality learned speed distribution compared link travel time two link speed distribution generated proposed mwsl shown fig 6 compared speed distribution computed original taxi trajectory test generalization model select two type link xiaozhai east road busy link type primary Ô¨Ånd morning evening peak obvious learned speed distribution computed distribution another link highway link commuting pattern only appears evening distribution based analysis concluded learned distribution link effectively represent different functional type link furthermore mean value ¬µ learned speed distribution closer ground truth demo generated road condition generate road condition mwsl based taxi od trip compare ground truth computed original taxi trajectory especially mark unblocked state road segment without taxi trajectory since speed limit road varied primarily deÔ¨Åned road type road length journal l ex class file vol xx no x august 12 use four kind color represent different road state congested congested slow unblocked divide road type equally example primary road interval congested 0 15 congested 15 30 slow 30 45 unblocked 45 60 pared result shown fig comparison generated road condition ground truth several time slot acquire following insight 1 similar trafÔ¨Åc state road condition generated model similar ground truth road segment road state road segment different road state frequently consistent tendency 2 rational adjacency correlation Ô¨Ånd road segment neighbor segment often similar road state generated road condition map indicates model learn adjacency correlation road network better illustrate model performance generated road condition also conduct quantitative analysis der xi chengdu datasets shown fig 8 computes divergence generated road condition ground truth prediction accuracy relatively worse among three method pm small number od pair time slot not provide efÔ¨Åcient model training better prediction performance however plot show generated condition achieve racy around 80 70 ordinary time slot datasets xi chengdu respectively compared ground truth weak supervision learning method provide believable road condition only relying od pair 8 conclusion Ô¨Årst time consider od travel time estimation inexact supervision problem propose framework infer optimal route based transition probability learn travel time distribution road segment intersection expect mle work 16 stacked architecture ha ployed learn complex relation road network generate travel time distribution road segment intersection cp decomposition finally produce transition probability road segment perception moreover iterative update strategy ha proposed update transition probability candidate path training process evaluate model two public datasets verify effectiveness proposed algorithm future work concluded four part firstly potential superior distribution developed assumption weakly supervised learning since paper only distribution ha employed secondly advanced route search algorithm could designed based example transition probability travel time route probability thirdly urban narios bus subway people tried extend application weakly supervised learning travel time distribution lastly federated method designed since od type data save abundant storage cost client mobile phone 9 acknowledgment grateful anonymous reviewer ful comment work wa partially supported grant national key research development program china no national key research development project china guangdong provincial key laboratory reference 1 wang fu ye learning estimate travel time proceeding acm sigkdd international conference knowledge discovery data mining 2018 pp 2 wang zhang cao li zheng arrive estimating travel time based deep neural network aaai conference artiÔ¨Åcial intelligence 2018 3 li cong sun cheng learning travel time distribution deep generative model world wide web conference 2019 pp 4 wu mao sun zheng zhang chen wang probabilistic robust route recovery ic proceeding acm sigkdd international ence knowledge discovery data mining 2016 pp 5 wang zheng xue travel time estimation path using sparse trajectory proceeding acm sigkdd international conference knowledge discovery data mining 2014 pp 6 sanaullah quddus enoch developing travel time estimation method using sparse gps data journal intelligent transportation system vol 20 no 6 pp 2016 7 wang tang kuo kifer li simple line travel time estimation using trip data acm transaction intelligent system technology tist vol 10 no 2 pp 2019 8 jindal chen nokleby ye et uniÔ¨Åed neural network approach estimating travel time distance taxi trip arxiv preprint 2017 9 li fu wang shahabi ye liu representation learning travel time estimation proceeding acm sigkdd international conference knowledge discovery data mining 2018 pp 10 cordonnier loukas extrapolating path graph neural network arxiv preprint 2019 11 zhou brief introduction weakly supervised learning national science review vol 5 no 1 pp 2018 12 dietterich lathrop erez solving multiple instance problem rectangle artiÔ¨Åcial intelligence vol 89 no pp 1997 13 richardson taylor travel time variability muter journey high speed ground transportation journal vol 12 no 1 1978 14 rakha arafeh dion estimating path reliability 2006 ieee intelligent transportation system conference ieee 2006 pp 15 arezoumandi estimation travel time reliability freeway using mean standard deviation travel time nal transportation system engineering information technology vol 11 no 6 pp 2011 16 zhang charoenphakdee wu sugiyama ing aggregate observation arxiv preprint 2020 17 wang lee fu yu learning embeddings intersection road network proceeding acm sigspatial international conference advance geographic formation system 2019 pp 18 schlichtkrull kipf bloem van den berg titov welling modeling relational data graph convolutional network european semantic web conference springer 2018 pp journal l ex class file vol xx no x august 13 19 chung gulcehre cho bengio empirical tion gated recurrent neural network sequence modeling arxiv preprint 2014 20 wang wang jin wang tang jia yu trafÔ¨Åc Ô¨Çow prediction via spatial temporal graph neural network proceeding web conference 2020 2020 pp 1092 21 zhang han cheng yang weakly supervised object localization detection survey ieee transaction pattern analysis machine intelligence vol 44 no 9 pp 5885 2021 22 li guo zhou towards safe weakly vised learning ieee transaction pattern analysis machine intelligence vol 43 no 1 pp 2019 23 nodet lemaire bondu ejols ouorou weakly supervised learning biquality learning duction 2021 international joint conference neural network ijcnn ieee 2021 pp 24 settle active learning literature survey 2009 25 enay verleysen classiÔ¨Åcation presence label noise survey ieee transaction neural network learning system vol 25 no 5 pp 2013 26 tiesyte jensen prediction travel time vehicle traveling known route proceeding acm sigspatial international conference advance geographic information system 2008 pp 27 wu ho lee prediction support vector regression ieee transaction intelligent portation system vol 5 no 4 pp 2004 28 sevlian rajagopal travel time estimation using Ô¨Çoating car data arxiv preprint 2010 29 luo tan chen ni finding time frequent path big trajectory data proceeding 2013 acm sigmod international conference management data 2013 pp 30 yang dai guo jensen hu pace pa ce ntric paradigm stochastic path Ô¨Ånding vldb journal vol 27 no 2 pp 2018 31 fu lee deepist deep temporal network travel time estimation proceeding acm international conference information knowledge management 2019 pp 32 yu yin zhu graph convolutional network deep learning framework trafÔ¨Åc forecasting arxiv preprint 2017 33 li yu shahabi liu diffusion convolutional recurrent neural network trafÔ¨Åc forecasting arxiv preprint 2017 34 guo lin wan li cong learning ic heterogeneity graph data trafÔ¨Åc forecasting ieee transaction knowledge data engineering 2021 35 yang zhang zhang sharededge grained travel time estimation highway system proceeding acm interactive mobile wearable tous technology vol 2 no 1 pp 2018 36 chen sharon hanna stone miao soh dyetc dynamic electronic toll collection trafÔ¨Åc congestion alleviation proceeding aaai conference artiÔ¨Åcial intelligence vol 32 no 1 2018 37 shao wang chen zhou estimation urban travel time sparse trafÔ¨Åc surveillance data proceeding 2020 high performance computing cluster technology conference 2020 international conference big data artiÔ¨Åcial intelligence 2020 pp 38 jin yan li huang li dual graph neural network travel time estimation arxiv preprint 2021 39 james citywide estimation travel time distribution bayesian deep graph learning ieee transaction knowledge data engineering 2021 40 brakatsoulas pfoser salas wenk matching vehicle tracking data proceeding national conference large data base 2005 pp 41 li ahmed smola inferring movement jectories gps snippet proceeding eighth acm international conference web search data mining 2015 pp 42 gal ghahramani theoretically grounded application dropout recurrent neural network advance neural information processing system vol 29 2016 43 luan zhao chang precup break ceiling stronger deep graph convolutional network arxiv preprint 2019 44 li li li missing trafÔ¨Åc data comparison tation method iet intelligent transport system vol 8 no 1 pp 2014 45 haklay weber openstreetmap street map ieee pervasive computing vol 7 no 4 pp 2008 46 yang gidofalvi fast map matching algorithm grating hidden markov model precomputation international journal geographical information science vol 32 no 3 pp 570 2018 47 friedman greedy function approximation gradient ing machine annals statistic pp 2001 48 fang huang wang zeng liang wang constgat contextual graph attention network travel time estimation baidu map proceeding acm sigkdd international conference knowledge discovery data mining 2020 pp 49 kipf welling classiÔ¨Åcation graph convolutional network arxiv preprint hongjun wang working toward gree computer science technology southern university science technology china received degree nanjing university post tions china research interest broadly machine learning urban ing explainable ai data mining data tion zhiwen zhang received gree artiÔ¨Åcial intelligence nankai sity china 2016 2019 respectively 2019 currently pursuing degree department environmental study university tokyo current research interest include urban computing data visualization zipei fan received degree computer science beihang university china 2012 degree civil neering university tokyo japan 2014 2017 respectively became project researcher project assistant professor 2017 2019 ha promoted project lecturer center spatial information science university tokyo research interest include ubiquitous computing machine learning data mining heterogeneous data fusion journal l ex class file vol xx no x august 14 jiyuan chen working towards gree computer science technology southern university science technology china major research Ô¨Åelds include cial intelligence deep learning urban computing data mining lingyu zhang joined baidu 2012 search strategy algorithm research development engineer joined didi 2013 served senior algorithm engineer technical director taxi strategy algorithm direction technical expert strategy model department currently researcher didi ai lab used machine learning big data technology design lead implementation multiple level intelligent system engine work didi order distribution system based combination optimization capacity based density clustering global optimization scheduling engine trafÔ¨Åc guidance personalized recommendation engine guess going personalized destination recommendation system etc participated company dozen international domestic core technology innovation patent research development application good using mathematical modeling business model abstraction machine learning etc solve practical business problem ha honorary title beijing invention innovation patent gold award qcon star lecturer research result included top ternational conference related artiÔ¨Åcial intelligence data mining kdd sigir aaai cikm ryosuke shibasaki wa born fukuoka japan received doctoral degree civil engineering sity tokyo japan 1980 1982 1987 respectively 1982 1988 wa public work research institute ministry construction 1988 1991 wa associate professor civil engineering department university tokyo 1991 joined institute industrial science university tokyo 1998 wa promoted professor center spatial information science university tokyo research interest cover data tion gi conceptual modeling spatial object microsimulation gi environment xuan song received degree signal information processing peking university 2017 wa selected excellent young researcher japan mext past ten year led participated many important project principal tigator primary actor japan grant mext japan big data disaster project jst japan young scientist grant scientiÔ¨Åc research grant mext japan research grant mlit japan core project microsoft grant jr east company hitachi company japan served associate editor guest editor area chair program committee member reviewer many famous journal conference imwut ieee transaction multimedia www journal big data journal istc mipr acm tist ieee tkde ubicomp iccv cvpr icra etc